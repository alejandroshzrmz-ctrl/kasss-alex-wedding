<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Beach Wedding | Kasss & Alex</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#eef6fb;padding:30px}
.top{text-align:right;margin-bottom:10px}
.top button{border:none;background:none;font-weight:bold;cursor:pointer}
.card{max-width:520px;margin:auto;background:white;padding:25px;border-radius:20px}
input,select,button{
  width:100%;margin-top:10px;padding:12px;
  border-radius:12px;border:1px solid #ccc
}
button.main{background:#0a3d62;color:white;border:none}
button.back{background:#ccc;color:black}
</style>
</head>

<body>

<div class="top">
  <button onclick="setLang('es')">ES</button> |
  <button onclick="setLang('en')">EN</button>
</div>

<div class="card">
<h2 data-es="üå¥ Boda en la Playa" data-en="üå¥ Beach Wedding"></h2>

<p data-es="Ceremonia frente al mar."
   data-en="Beach ceremony by the ocean."></p>

<h3 data-es="Confirmar asistencia" data-en="Confirm attendance"></h3>

<input id="cel" placeholder="WhatsApp / Celular">
<input id="correo" placeholder="Correo electr√≥nico">
<select id="acomps"></select>

<button class="main"
  data-es="Confirmar asistencia"
  data-en="Confirm attendance"
  onclick="confirmar()"></button>

<button class="back"
  data-es="Volver"
  data-en="Back"
  onclick="volver()"></button>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbxd8RlsY09Bqjp2A9db60X9Bj-W7noj8WPJy1CLgHTLjNQTWb_9eC0o2TeFp0dQ3ZRbFw/exec";
const id = new URLSearchParams(window.location.search).get("id");

/* ===== Idioma ===== */
const lang = localStorage.getItem("lang") || "es";
function setLang(l){ localStorage.setItem("lang",l); location.reload(); }
document.querySelectorAll("[data-es]").forEach(el=>{
  el.textContent = el.getAttribute("data-"+lang);
});

/* ===== Datos ===== */
fetch(`${API}?id=${id}`)
.then(r=>r.json())
.then(d=>{
  const s = document.getElementById("acomps");
  for(let i=0;i<=d.max;i++){
    s.innerHTML += `<option value="${i}">${i}</option>`;
  }
});

function confirmar(){
  fetch(API,{
    method:"POST",
    body:JSON.stringify({
      id,
      evento:"playa",
      celular:cel.value,
      correo:correo.value,
      acompanantes:acomps.value
    })
  })
  .then(r=>r.json())
  .then(res=>{
    if(res.error){
      alert("‚ö†Ô∏è " + res.error);
    }else{
      alert(lang==="es"
        ? "‚úÖ Confirmaci√≥n guardada. Este fue tu √∫nico cambio permitido."
        : "‚úÖ Confirmation saved. This was your only allowed change."
      );
    }
  });
}

function volver(){
  window.location.href = "eventos.html?id=" + id;
}
</script>

</body>
</html>
